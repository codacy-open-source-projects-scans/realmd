domains:
- id: sssd
  hosts:
  - hostname: client.test
    role: client
    artifacts:
    - /etc/sssd/*
    - /var/log/sssd/*
    - /var/lib/sss/db/*

  - hostname: dc.ad.test
    role: ad
    os:
      family: windows
    conn:
      type: ssh
      username: Administrator@ad.test
      password: vagrant
    config:
      adminpw: vagrant
      client:
        ad_domain: ad.test

  - hostname: dc.samba.test
    role: samba
    config:
      binddn: CN=Administrator,CN=Users,DC=samba,DC=test
      bindpw: Secret123
      client:
        ad_domain: samba.test
        krb5_keytab: /var/enrollment/samba.test.keytab
        ldap_krb5_keytab: /var/enrollment/samba.test.keytab

  - hostname: master.ipa.test
    role: ipa
    config:
      client:
        ipa_domain: ipa.test
        krb5_keytab: /var/enrollment/ipa.test.keytab
        ldap_krb5_keytab: /var/enrollment/ipa.test.keytab
    artifacts:
    - /etc/sssd/*
    - /var/log/dirsrv/*
    - /var/log/httpd/*
    - /var/log/ipa/*
    - /var/log/krb5kdc.log
    - /var/log/sssd/*
    - /var/lib/sss/db/*
